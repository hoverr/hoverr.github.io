<html>
<head>
<title>Ad test</title>
<meta name="atdlayout" content="homepage" />
<script>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
googletag.cmd.push(function(){
	googletag.pubads().disableInitialLoad();
})
</script>
<!-- <script type="text/javascript" src="//go.automatad.com/geo/7UhSFF/afihbs.js" async></script> -->
 <script type="text/javascript">
'use strict';

(function (w, d) {
	// Check the document in interactive mode or ready for DOM manupulation or not
	// Callback function will be called once the document is atleast in interactive mode
	(function (funcName, baseObj) {
		funcName = funcName || "docReady";
		baseObj = baseObj || w;
		var readyList = [],
		    readyFired = false,
		    readyEventHandlersInstalled = false;

		// call this when the document is ready
		// this function protects itself against being called more than once
		function ready() {
			if (!readyFired) {
				// this must be set to true before we start calling callbacks
				readyFired = true;
				for (var i = 0; i < readyList.length; i++) {
					readyList[i].fn.call(w, readyList[i].ctx);
				} // allow any closures held by these functions to free
				readyList = [];
			}
		};

		function readyStateChange() {
			if (d.readyState == 'interactive' || d.readyState == 'complete' || d.readyState == 'loaded') ready();
		};

		// This is the one public interface
		baseObj[funcName] = function (callback, context) {
			// if ready has already fired, then just schedule the callback
			if (readyFired) {
				setTimeout(function () {
					callback(context);
				}, 1);
				return;
			} else readyList.push({ fn: callback, ctx: context });

			// if document already ready to go, schedule the ready function to run
			if (d.readyState == 'interactive' || d.readyState == 'complete' || d.readyState == 'loaded') setTimeout(ready, 1);else if (!readyEventHandlersInstalled) {
				// otherwise if we don't have event handlers installed, install them
				if (d.addEventListener) {
					d.addEventListener("DOMContentLoaded", ready, false);
					w.addEventListener("load", ready, false);
				} else {
					// must be IE
					d.attachEvent("onreadystatechange", readyStateChange);
					w.attachEvent("onload", ready);
				}
				readyEventHandlersInstalled = true;
			}
		};
	})("_hovDocReady", w);

	// Defining window variable if it is not defined
	if (!w.pbjs) w.pbjs = {};
	if (!w.googletag) w.googletag = {};

	// Linking the globai variable to the local variable
	var divIdCounter = 1,
	    pbjs = w.pbjs,
	    googletag = w.googletag,
	    location = w.location.href,
	    useSSL = 'https:' == d.location.protocol,
	    gptJs = '//www.googletagservices.com/tag/js/gpt.js',
	    prebidJs = '//cdn.hoverr.me/js/prebid_lib_currency_v33.js',
	    priceFileLink = '//cdn.hoverr.me/json/latest.json',
	    section = undefined,
	    infiniteScroll = ('false' == 'true') ? true : false,
	    currency = "INR",
	    layoutAdSpots = {"homepage": [{"code": "div-gpt-ad-D-300x250-trendstry-fi_hp_p1", "selector": "n/a", "bids": [{"params": {"placementId": "11942411"}, "bidder": "appnexus"}, {"params": {"id": "157088", "floor": "0"}, "bidder": "districtmDMX"}, {"params": {"ct": 602498, "cf": "300X250", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"tagid": "505407"}, "bidder": "sovrn"}], "adUnitId": "/1013527/ATD_dch/ATD_300x250_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_hp_p1", "sizes": [[300, 250]], "dynamic": false}, {"code": "div-gpt-ad-D-300x250-trendstry-fi_hp_p2", "selector": "n/a", "bids": [{"params": {"placementId": "11942411"}, "bidder": "appnexus"}, {"params": {"id": "157088", "floor": "0"}, "bidder": "districtmDMX"}, {"params": {"ct": 602498, "cf": "300X250", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"tagid": "505407"}, "bidder": "sovrn"}], "adUnitId": "/1013527/ATD_dch/ATD_300x250_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_hp_p2", "sizes": [[300, 250]], "dynamic": false}, {"code": "div-gpt-ad-D-300x250-city-fi_hp_p3", "selector": "n/a", "bids": [{"params": {"placementId": "11942411"}, "bidder": "appnexus"}, {"params": {"id": "157088", "floor": "0"}, "bidder": "districtmDMX"}, {"params": {"ct": 602498, "cf": "300X250", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"tagid": "505407"}, "bidder": "sovrn"}], "adUnitId": "/1013527/ATD_dch/ATD_300x250_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_hp_p3", "sizes": [[300, 250]], "dynamic": false}, {"code": "div-gpt-ad-D-300x250-ent-fi_hp_p4", "selector": "n/a", "bids": [{"params": {"placementId": "11942411"}, "bidder": "appnexus"}, {"params": {"id": "157088", "floor": "0"}, "bidder": "districtmDMX"}, {"params": {"ct": 602498, "cf": "300X250", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"tagid": "505407"}, "bidder": "sovrn"}], "adUnitId": "/1013527/ATD_dch/ATD_300x250_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_hp_p4", "sizes": [[300, 250]], "dynamic": false}, {"code": "div-gpt-ad-D-300x250-photo-fi_hp_p5", "selector": "n/a", "bids": [{"params": {"placementId": "11942411"}, "bidder": "appnexus"}, {"params": {"id": "157088", "floor": "0"}, "bidder": "districtmDMX"}, {"params": {"ct": 602498, "cf": "300X250", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"tagid": "505407"}, "bidder": "sovrn"}], "adUnitId": "/1013527/ATD_dch/ATD_300x250_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_hp_p5", "sizes": [[300, 250]], "dynamic": false}, {"code": "div-gpt-ad-D-300x250-spl-fi_hp_p6", "selector": "n/a", "bids": [{"params": {"placementId": "11942411"}, "bidder": "appnexus"}, {"params": {"id": "157088", "floor": "0"}, "bidder": "districtmDMX"}, {"params": {"ct": 602498, "cf": "300X250", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"tagid": "505407"}, "bidder": "sovrn"}], "adUnitId": "/1013527/ATD_dch/ATD_300x250_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_hp_p5", "sizes": [[300, 250]], "dynamic": false}, {"code": "div-gpt-ad-D-728x90-hdr-fi_hp_hdr", "selector": "n/a", "bids": [{"params": {"placementId": "11942411"}, "bidder": "appnexus"}, {"params": {"id": "157088", "floor": "0"}, "bidder": "districtmDMX"}, {"params": {"ct": 602498, "cf": "300X250", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"tagid": "505407"}, "bidder": "sovrn"}], "adUnitId": "/1013527/ATD_dch/ATD_300x250_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_hp_hdr", "sizes": [[300, 250]], "dynamic": false}, {"code": "div-gpt-ad-D-state-970x90-fi_hp_p1", "selector": "n/a", "bids": [{"params": {"ct": 602493, "cf": "970x90", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"id": 157088, "floor": 0}, "bidder": "districtmDMX"}, {"params": {"placementId": "11942278"}, "bidder": "appnexus"}], "adUnitId": "/1013527/ATD_dch/ATD_970x90_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_hp_p1", "sizes": [[970, 90]], "dynamic": false}, {"code": "div-gpt-ad-D-ent-970x90-fi_hp_p2", "selector": "n/a", "bids": [{"params": {"ct": 602493, "cf": "970x90", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"id": 157088, "floor": 0}, "bidder": "districtmDMX"}, {"params": {"placementId": "11942278"}, "bidder": "appnexus"}], "adUnitId": "/1013527/ATD_dch/ATD_970x90_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_hp_p2", "sizes": [[970, 90]], "dynamic": false}, {"code": "div-gpt-ad-D-feature-970x90-fi_hp_p3", "selector": "n/a", "bids": [{"params": {"ct": 602493, "cf": "970x90", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"id": 157088, "floor": 0}, "bidder": "districtmDMX"}, {"params": {"placementId": "11942278"}, "bidder": "appnexus"}], "adUnitId": "/1013527/ATD_dch/ATD_970x90_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_hp_p3", "sizes": [[970, 90]], "dynamic": false}], "articlepage": [{"code": "div-gpt-ad-D-728x90-hdr-fi_ap_hdr", "selector": "n/a", "bids": [{"params": {"placementId": "11941368"}, "bidder": "appnexus"}, {"params": {"id": 157088, "floor": 0}, "bidder": "districtmDMX"}, {"params": {"ct": 602465, "cf": "728X90", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"tagid": "505396"}, "bidder": "sovrn"}], "adUnitId": "/1013527/ATD_dch/ATD_728x90_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_ap_hdr", "sizes": [[728, 90]], "dynamic": false}, {"code": "div-gpt-ad-D-300x250-rhs1-fi_ap_p1", "selector": "n/a", "bids": [{"params": {"placementId": "11942411"}, "bidder": "appnexus"}, {"params": {"id": "157088", "floor": "0"}, "bidder": "districtmDMX"}, {"params": {"ct": 602498, "cf": "300X250", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"tagid": "505407"}, "bidder": "sovrn"}], "adUnitId": "/1013527/ATD_dch/ATD_300x250_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_ap_p1", "sizes": [[300, 250]], "dynamic": false}, {"code": "div-gpt-ad-D-300x250-rhs2-fi_ap_p2", "selector": "n/a", "bids": [{"params": {"placementId": "11942411"}, "bidder": "appnexus"}, {"params": {"id": "157088", "floor": "0"}, "bidder": "districtmDMX"}, {"params": {"ct": 602498, "cf": "300X250", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"tagid": "505407"}, "bidder": "sovrn"}], "adUnitId": "/1013527/ATD_dch/ATD_300x250_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_ap_p2", "sizes": [[300, 250]], "dynamic": false}, {"code": "div-gpt-ad-D-300x250-rhs3-fi_ap_p3", "selector": "n/a", "bids": [{"params": {"placementId": "11942411"}, "bidder": "appnexus"}, {"params": {"id": "157088", "floor": "0"}, "bidder": "districtmDMX"}, {"params": {"ct": 602498, "cf": "300X250", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"tagid": "505407"}, "bidder": "sovrn"}], "adUnitId": "/1013527/ATD_dch/ATD_300x250_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_ap_p3", "sizes": [[300, 250]], "dynamic": false}, {"code": "div-gpt-ad-D-300x600-rhs4-fi_ap_p1", "selector": "n/a", "bids": [{"params": {"placementId": "11942167"}, "bidder": "appnexus"}, {"params": {"id": 157088, "floor": 0}, "bidder": "districtmDMX"}, {"params": {"ct": 602475, "cf": "300X600", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"tagid": "505398"}, "bidder": "sovrn"}], "adUnitId": "/1013527/ATD_dch/ATD_300x600_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_ap_p1", "sizes": [[300, 600]], "dynamic": false}, {"code": "div-gpt-ad-D-728x90-inarticle-fi_ap_inr1", "selector": "n/a", "bids": [{"params": {"placementId": "11941368"}, "bidder": "appnexus"}, {"params": {"id": 157088, "floor": 0}, "bidder": "districtmDMX"}, {"params": {"ct": 602465, "cf": "728X90", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"tagid": "505396"}, "bidder": "sovrn"}], "adUnitId": "/1013527/ATD_dch/ATD_728x90_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_ap_inr1", "sizes": [[728, 90]], "dynamic": false}, {"code": "div-gpt-ad-D-728x90-inarticle-fi_ap_eoa", "selector": "n/a", "bids": [{"params": {"placementId": "11941368"}, "bidder": "appnexus"}, {"params": {"id": 157088, "floor": 0}, "bidder": "districtmDMX"}, {"params": {"ct": 602465, "cf": "728X90", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"tagid": "505396"}, "bidder": "sovrn"}], "adUnitId": "/1013527/ATD_dch/ATD_728x90_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_ap_eoa", "sizes": [[728, 90]], "dynamic": false}, {"code": "div-gpt-ad-D-970x90-footer-fi_ap_ftr", "selector": "n/a", "bids": [{"params": {"ct": 602493, "cf": "970x90", "cp": 561335}, "bidder": "pulsepoint"}, {"params": {"zoneId": "725976", "siteId": "152848", "accountId": "16944", "floor": 0}, "bidder": "rubicon"}, {"params": {"id": 157088, "floor": 0}, "bidder": "districtmDMX"}, {"params": {"placementId": "11942278"}, "bidder": "appnexus"}], "adUnitId": "/1013527/ATD_dch/ATD_970x90_GENERAL", "key": "mod", "hbEnabled": true, "defineSlot": true, "value": "fi_ap_ftr", "sizes": [[970, 90]], "dynamic": false}]},
	    currencyObject = {},
	    priceGranularity = {
		'buckets': [{
			'min': 0,
			'max': 20,
			'increment': 0.01
		}]
	};

	// Setting up the price granularity
	if (currency == 'USD') currencyObject = { "priceGranularity": priceGranularity };else currencyObject = {
		"priceGranularity": priceGranularity,
		"currency": {
			"adServerCurrency": currency,
			"granularityMultiplier": 50,
			"conversionRateFile": (useSSL ? 'https:' : 'http:') + priceFileLink
		}
	};

	// Looking for section defined meta tag
	// If present return content of the meta tag
	// Else return undefined
	var getSection = function getSection() {
		var meta = d.querySelector('meta[name="atdlayout"]');
		if (meta) return meta.getAttribute("content");else return undefined;
	},


	// Load JS in the head
	// Check the document protocol type and
	// get the script based on that
	loadJS = function loadJS(src) {
		var s = d.createElement('script');
		s.src = (useSSL ? 'https:' : 'http:') + src;
		s.async = false;
		s.type = "text/javascript";

		(d.getElementsByTagName("head")[0] || d.documentElement).appendChild(s);
	},


	// Create container if the given selector present
	// Find the elemtn by selector
	// Put a div after the selected element
	createContainer = function createContainer(selector, code) {
		var elem = d.querySelector(selector),
		    div = d.createElement('div');

		div.id = code;
		elem.setAttribute('data-hov-done', 'true');
		if (elem && !elem.getAttribute('data-hov-done')) {
			elem.parentNode.insertBefore(div, elem.nextSibling);
			return div;
		} else return undefined;
	},
	findDiv = function findDiv(divId) {
		return d.getElementById(divId);
	},
	checkAndPutDiv = function checkAndPutDiv(adspots) {
		var i = 0,
		    div = void 0,
		    tempArray = [];

		for (; i < adspots.length; i++) {
			if (adspots[i].dynamic && adspots[i].selector) {
				div = createContainer(adspots[i].selector, adspots[i].code + '_' + divIdCounter);
				if (div) {
					adspots[i].code = adspots[i].code + '_' + divIdCounter;
					divIdCounter++;
					tempArray.push(adspots[i]);
				} else if (section) tempArray.push(adspots[i]);
			} else {
				div = findDiv(adspots[i].code);
				if (div) tempArray.push(adspots[i]);else if (section) tempArray.push(adspots[i]);
			}
		}return tempArray;
	},
	setUpPrebid = function setUpPrebid(data) {
		// Setting up the pbjs
		pbjs.que = pbjs.que || [];
		pbjs.que.push(function () {
			pbjs.enableSendAllBids();
		});
		pbjs.que.push(function () {
			pbjs.setConfig(currencyObject);
		});
		pbjs.que.push(function () {
			pbjs.requestBids({
				adUnits: function (data) {
					var tempArray = [],
					    i = 0;
					for (; i < data.length; i++) {
						if (data[i].hbEnabled) tempArray.push({
							code: data[i].code,
							sizes: data[i].sizes,
							bids: data[i].bids
						});
					}return tempArray;
				}(data),
				bidsBackHandler: function bidsBackHandler(bidResponses) {
					if (!pbjs.adserverRequestSent) {
						pbjs.adserverRequestSent = true;
						googletag.cmd.push(function () {
							pbjs.que.push(function () {
								pbjs.setTargetingForGPTAsync();
								googletag.pubads().refresh();
							});
						});
					} else {
						googletag.cmd.push(function () {
							pbjs.que.push(function () {
								var slots = googletag.pubads().getSlots(),
								    i = 0,
								    j = 0,
								    slotArray = [];

								for (; i < slots.length; i++) {
									for (j = 0; j < data.length; j++) {
										if (slots[i].ja.m == data[j].code) {
											slotArray.push(slots[i]);
											break;
										}
									}
								}googletag.pubads().refresh(slotArray);
							});
						});
					}
				},
				timeout: 4000
			});
		});
	},
	setUpGoogTag = function setUpGoogTag(data) {
		// Setting up the googletag
		googletag.cmd = googletag.cmd || [];
		googletag.cmd.push(function () {
			googletag.pubads().disableInitialLoad();
		});
		googletag.cmd.push(function () {
			var i = 0;
			for (; i < data.length; i++) {
				if (data[i].dynamic || data[i].defineSlot) {
					if (data[i].key && data[i].value) googletag.defineSlot(data[i].adUnitId, data[i].sizes[0], data[i].code).addService(googletag.pubads()).setTargeting(data[i].key, data[i].value);else googletag.defineSlot(data[i].adUnitId, data[i].sizes[0], data[i].code).addService(googletag.pubads());
				}
			}googletag.pubads().enableSingleRequest();
			googletag.enableServices();
		});
	},
	init = function init(section) {
		var tempLayoutData = [];

		// if (section) {
		// 	if (layoutAdSpots[section] !== undefined) tempLayoutData = checkAndPutDiv(layoutAdSpots[section]);else console.warn('WARN : section key is not found in layout object.');
		// } else {
		// 	var key = void 0,
		// 	    tempData = void 0,
		// 	    i = 0;

		// 	for (key in layoutAdSpots) {
		// 		tempData = checkAndPutDiv(layoutAdSpots[key]);
		// 		for (i = 0; i < tempData.length; i++) {
		// 			tempLayoutData.push(tempData[i]);
		// 		}
		// 	}
		// }
		tempLayoutData = checkAndPutDiv(layoutAdSpots['homepage']);

		setUpPrebid(tempLayoutData);
		setUpGoogTag(tempLayoutData);
	};

	_hovDocReady(function () {
		section = getSection();
		init(section);

		loadJS(gptJs);
		loadJS(prebidJs);

		if (infiniteScroll) setInterval(function () {
			if (location != w.location.href) {
				location = w.location.href;
				init(section);
			}
		}, 1000);
	});
})(window, document);
 </script>

</head>

<body>

<p><strong>Trending Story Widget</strong></p>
<div id='div-gpt-ad-D-300x250-trendstry-fi_hp_p1' style='height:250px; width:300px;'>
 <script>
 googletag.cmd.push(function() { googletag.display('div-gpt-ad-D-300x250-trendstry-fi_hp_p1'); });
 </script>
 </div>
 
<div id='div-gpt-ad-D-300x250-trendstry-fi_hp_p2' style='height:250px; width:300px;'>
 <script>
 googletag.cmd.push(function() { googletag.display('div-gpt-ad-D-300x250-trendstry-fi_hp_p2'); });
 </script>
 </div>
 
<p><strong>City Widget</strong></p>
<div id='div-gpt-ad-D-300x250-city-fi_hp_p3' style='height:250px; width:300px;'>
 <script>
 googletag.cmd.push(function() { googletag.display('div-gpt-ad-D-300x250-city-fi_hp_p3'); });
 </script>
 </div>

<p><strong>Entertainment Widget</strong></p> 
<div id='div-gpt-ad-D-300x250-ent-fi_hp_p4' style='height:250px; width:300px;'>
 <script>
 googletag.cmd.push(function() { googletag.display('div-gpt-ad-D-300x250-ent-fi_hp_p4'); });
 </script>
 </div>
 
</body>
</html>
