pbjsChunk([179],{343:function(e,r,t){e.exports=t(344)},344:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t.d(r,"helper",function(){return C}),t.d(r,"spec",function(){return i});var w=t(0),n=t(1),A=t(3),s=t(10),T=t(2);function I(){return(I=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var S="https://rtb.gamoshi.io",C={getTopFrame:function(){try{return window.top===window?1:0}catch(e){}return 0},startsWith:function(e,r){return e.substr(0,r.length)===r},getTopWindowDomain:function(e){var r=e.indexOf("://")+"://".length;return e.substring(r,e.indexOf("/",r)<0?e.length:e.indexOf("/",r))},getMediaType:function(e){return e.ext?e.ext.media_type?e.ext.media_type.toLowerCase():e.ext.vast_url?T.d:T.b:T.b}},i={code:"gamoshi",aliases:["gambid","cleanmedia","9MediaOnline","adtarget"],supportedMediaTypes:["banner","video"],isBidRequestValid:function(e){return!!e.params.supplyPartnerId&&w.isStr(e.params.supplyPartnerId)&&(!e.params.rtbEndpoint||w.isStr(e.params.rtbEndpoint))&&(!e.params.bidfloor||w.isNumber(e.params.bidfloor))&&(!e.params.adpos||w.isNumber(e.params.adpos))&&(!e.params.protocols||Array.isArray(e.params.protocols))&&(!e.params.instl||0===e.params.instl||1===e.params.instl)},buildRequests:function(y,b){var x=this;return y.map(function(e){var r=e.adUnitCode,t=e.auctionId,n=e.mediaTypes,i=e.params,a=e.sizes,s=e.transactionId,o=i.rtbEndpoint||S,d="".concat(o,"/r/").concat(i.supplyPartnerId,"/bidr?rformat=open_rtb&reqformat=rtb_json&bidder=prebid")+(i.query?"&"+i.query:""),p=A.b.getConfig("pageUrl")||b.refererInfo.referer,u={id:t,site:{domain:C.getTopWindowDomain(p),page:p,ref:b.refererInfo.referer},device:{ua:navigator.userAgent,dnt:w.getDNT()?1:0,h:screen.height,w:screen.width,language:navigator.language},imp:[],ext:{},user:{ext:{}},source:{ext:{}},regs:{ext:{}}},c=b.gdprConsent;c&&c.consentString&&c.gdprApplies&&(u.ext.gdpr_consent={consent_string:c.consentString,consent_required:c.gdprApplies},w.deepSetValue(u,"regs.ext.gdpr",!0===c.gdprApplies?1:0),w.deepSetValue(u,"user.ext.consent",c.consentString)),y[0].schain&&w.deepSetValue(u,"source.ext.schain",y[0].schain),b&&b.uspConsent&&w.deepSetValue(u,"regs.ext.us_privacy",b.uspConsent);var l={id:s,instl:1===i.instl?1:0,tagid:r,bidfloor:i.bidfloor||0,bidfloorcur:"USD",secure:1},f=i.favoredMediaType&&x.supportedMediaTypes.includes(i.favoredMediaType);if((!n||n.banner)&&(!f||i.favoredMediaType===T.b)){var g=I({},l,{banner:{w:a.length?a[0][0]:300,h:a.length?a[0][1]:250,pos:i.pos||0,topframe:w.inIframe()?0:1}});u.imp.push(g)}if(n&&n.video&&(!f||i.favoredMediaType===T.d)){var m=n.video.playerSize||a,h=I({},l,{video:{protocols:i.protocols||[1,2,3,4,5,6],pos:i.pos||0,ext:{context:n.video.context}}});w.isArray(m[0])?(h.video.w=m[0][0],h.video.h=m[0][1]):w.isNumber(m[0])?(h.video.w=m[0],h.video.h=m[1]):(h.video.w=300,h.video.h=250),u.imp.push(h)}var v=[];if(e&&e.userId&&(_(v,w.deepAccess(e,"userId.id5id"),"id5-sync.com","ID5ID"),_(v,w.deepAccess(e,"userId.tdid"),"adserver.org","TDID")),0<v.length&&(u.user.ext.eids=v),0!==u.imp.length)return{method:"POST",url:d,data:u,bidRequest:e}})},interpretResponse:function(e,n){var i=e&&e.body;if(!i)return w.logError("empty response"),[];var r=i.seatbid.reduce(function(e,r){return e.concat(r.bid)},[]),a=[];return r.forEach(function(e){var r={requestId:n.bidRequest.bidId,cpm:e.price,width:e.w,height:e.h,ttl:360,creativeId:e.crid||e.adid,netRevenue:!0,currency:e.cur||i.cur,mediaType:C.getMediaType(e)};if(w.deepAccess(n.bidRequest,"mediaTypes."+r.mediaType))if(r.mediaType===T.b)a.push(I({},r,{ad:e.adm}));else if(r.mediaType===T.d){var t=w.deepAccess(n.bidRequest,"mediaTypes.video.context");a.push(I({},r,{vastUrl:e.ext.vast_url,vastXml:e.adm,renderer:"outstream"===t?function(e,r){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=s.a.install({url:e.params&&e.params.rendererUrl||r.ext&&r.ext.renderer_url||"https://s.gamoshi.io/video/latest/renderer.js",config:t,loaded:!1});try{n.setRender(o)}catch(e){w.logWarn("Prebid Error calling setRender on renderer",e)}return n}(n.bidRequest,e):void 0}))}}),a},getUserSyncs:function(e,r,t,n){var i=[],a=!1,s="",o="";t&&"boolean"==typeof t.gdprApplies&&(a=t.gdprApplies);var d=a?1:0;a&&t.consentString&&(s=encodeURIComponent(t.consentString)),n&&(o=encodeURIComponent(n));var p={gdpr:d,consent:s,uspConsent:o};return r.forEach(function(e){if(e.body){var r=e.body;r.ext&&Array.isArray(r.ext.utrk)&&r.ext.utrk.forEach(function(e){var r=u(e.url,p);i.push({type:e.type,url:r})}),Array.isArray(r.seatbid)&&r.seatbid.forEach(function(e){Array.isArray(e.bid)&&e.bid.forEach(function(e){e.ext&&Array.isArray(e.ext.utrk)&&e.ext.utrk.forEach(function(e){var r=u(e.url,p);i.push({type:e.type,url:r})})})})}}),i}};function o(r){r.renderer.push(function(){var e=r.adUnitCode+"/"+r.adId;window.GamoshiPlayer.renderAd({id:e,debug:0<=window.location.href.indexOf("pbjsDebug"),placement:document.getElementById(r.adUnitCode),width:r.width,height:r.height,events:{ALL_ADS_COMPLETED:function(){return window.setTimeout(function(){window.GamoshiPlayer.removeAd(e)},300)}},vastUrl:r.vastUrl,vastXml:r.vastXml})})}function _(e,r,t,n){w.isStr(r)&&e.push({source:t,uids:[{id:r,ext:{rtiPartner:n}}]})}function u(e,r){return e.replace("[GDPR]",r.gdpr).replace("[CONSENT]",r.consent).replace("[US_PRIVACY]",r.uspConsent)}Object(n.registerBidder)(i)}},[343]);