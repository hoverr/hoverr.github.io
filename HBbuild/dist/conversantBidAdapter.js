atdpbjsChunk([206],{278:function(e,r,a){e.exports=a(279)},279:function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),a.d(r,"spec",function(){return n});var m=a(0),i=a(1),t=a(2),s="conversant",n={code:s,aliases:["cnvr"],supportedMediaTypes:[t.b,t.d],isBidRequestValid:function(e){if(!e||!e.params)return m.logWarn(s+": Missing bid parameters"),!1;if(!m.isStr(e.params.site_id))return m.logWarn(s+": site_id must be specified as a string"),!1;if(l(e))if(e.params.mimes){if(!m.isArray(e.params.mimes)||!e.params.mimes.every(function(e){return m.isStr(e)}))return m.logWarn(s+": mimes must be an array of strings"),!1}else m.logWarn(s+": mimes should be specified for videos");return!0},buildRequests:function(e,r){var a,i=r&&r.refererInfo?r.refererInfo.referer:"",o="",d="",p=null,u="_pubcid",t=e.map(function(e){var r=m.getBidIdParameter("bidfloor",e.params);o=m.getBidIdParameter("site_id",e.params)||o,u=m.getBidIdParameter("pubcid_name",e.params)||u,d=e.auctionId;var a={id:e.bidId,secure:1,bidfloor:r||0,displaymanager:"Prebid.js",displaymanagerver:"3.13.0-pre"};if(v(e.params.tag_id,a,"tagid"),l(e)){var i=m.deepAccess(e,"mediaTypes.video")||{},t=g(i.playerSize||e.sizes),s={};t&&t[0]&&(v(t[0].w,s,"w"),v(t[0].h,s,"h")),v(e.params.position,s,"pos"),v(e.params.mimes||i.mimes,s,"mimes"),v(e.params.maxduration,s,"maxduration"),v(e.params.protocols||i.protocols,s,"protocols"),v(e.params.api||i.api,s,"api"),a.video=s}else{var n={format:g((m.deepAccess(e,"mediaTypes.banner")||{}).sizes||e.sizes)};v(e.params.position,n,"pos"),a.banner=n}return e.userId&&e.userId.pubcid?p=e.userId.pubcid:e.crumbs&&e.crumbs.pubcid&&(p=e.crumbs.pubcid),a}),s={id:d,imp:t,site:{id:o,mobile:null!==document.querySelector('meta[name="viewport"][content*="width=device-width"]')?1:0,page:i},device:(a=navigator.language?"language":"userLanguage",{h:screen.height,w:screen.width,dnt:"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNoTrack||"yes"===navigator.doNotTrack?1:0,language:navigator[a].split("-")[0],make:navigator.vendor?navigator.vendor:"",ua:navigator.userAgent}),at:1},n={};r&&(r.gdprConsent&&(n.consent=r.gdprConsent.consentString,"boolean"==typeof r.gdprConsent.gdprApplies&&m.deepSetValue(s,"regs.ext.gdpr",r.gdprConsent.gdprApplies?1:0)),r.uspConsent&&m.deepSetValue(s,"regs.ext.us_privacy",r.uspConsent)),(p=p||function(e){var r;try{if(!(r=m.getCookie(e))){var a=m.getDataFromLocalStorage("".concat(e,"_exp"));(""===a||a&&0<new Date(a).getTime()-Date.now())&&(r=(r=m.getDataFromLocalStorage(e))?decodeURIComponent(r):r)}m.isStr(r)&&"{"===r.charAt(0)&&(r=JSON.parse(r))}catch(e){m.logError(e)}return r}(u))&&(n.fpc=p);var c=function(e){var r=e[0],a=[];if(m.isArray(r.userIdAsEids)&&0<r.userIdAsEids.length){var i={"adserver.org":1,"liveramp.com":1,"criteo.com":1,"id5-sync.com":1,"parrable.com":1,"digitru.st":1,"liveintent.com":1};r.userIdAsEids.forEach(function(e){i.hasOwnProperty(e.source)&&a.push(e)})}return a}(e);return 0<c.length&&(n.eids=c),m.isEmpty(n)||(s.user={ext:n}),{method:"POST",url:"https://web.hb.ad.cpe.dotomi.com/s2s/header/24",data:s}},interpretResponse:function(n,e){var o=[],d={};return n=n.body,e&&e.data&&e.data.imp&&m._each(e.data.imp,function(e){return d[e.id]=e}),n&&m.isArray(n.seatbid)&&m._each(n.seatbid,function(e){m._each(e.bid,function(e){var r=parseFloat(e.price);if(0<r&&e.impid){var a=e.adm||"",i=e.nurl||"",t=d[e.impid],s={requestId:e.impid,currency:n.cur||"USD",cpm:r,creativeId:e.crid||"",ttl:300,netRevenue:!0};t.video?("<"===a.charAt(0)?s.vastXml=a:s.vastUrl=a,s.mediaType="video",s.width=t.video.w,s.height=t.video.h):(s.ad=a+'<img src="'+i+'" />',s.width=e.w,s.height=e.h),o.push(s)}})}),o},transformBidParams:function(e){return m.convertTypes({site_id:"string",secure:"number",mobile:"number"},e)}};function g(e){var r;return Array.isArray(e)&&(r=2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]?[{w:e[0],h:e[1]}]:m._map(e,function(e){return{w:e[0],h:e[1]}})),r}function l(e){return"video"===e.mediaType||m.deepAccess(e,"mediaTypes.video")}function v(e,r,a){e&&(r[a]=e)}Object(i.registerBidder)(n)}},[278]);