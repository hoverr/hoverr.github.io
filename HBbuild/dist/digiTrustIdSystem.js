pbjsChunk([197],{303:function(t,i,e){t.exports=e(304)},304:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.surfaceTestHook=p,e.d(i,"digiTrustIdSubmodule",function(){return k});var a=e(0),d=e(4),n=e(13),r=0;function u(){return null!=window.DigiTrust&&DigiTrust.isClient}var f=function(){},o=2,g="https://prebid.digitru.st/id/v1",b=function(t){return"function"==typeof t};function m(t){var i=new Date;i.setTime(i.getTime()+6048e5),a.setCookie("DigiTrust.v1.identity",function(i){try{return"string"!=typeof i&&(i=JSON.stringify(i)),btoa(i)}catch(t){return i}}(t),i.toUTCString(),"none")}function c(t){var s=null;clearTimeout(r);var l={isClient:!(r=0),isMock:!0,_internals:{callCount:0,initCallback:null},getUser:function(t,i){var e=!!b(i),n=e?i:f,r={success:!1},u=l._internals;u.callCount++;function o(t){if(u.callCount<=1&&b(u.initCallback))try{u.initCallback(t)}catch(t){a.logError("Exception in passed DigiTrust init callback")}}if(!T(t.member))return e?void n(r):r;if(null!=s)return e?void o(s):s;var c={success:function(t){var i={success:!0};try{m(t),i.identity=JSON.parse(t),s=i}catch(t){i.success=!1,delete i.identity}o(i)},fail:function(t){a.logError("DigiTrustId API error: "+t)}};return v.hasConsent(null,function(t){var i;t&&(i=c,Object(d.a)(g,{success:i.success,error:i.fail},null,{method:"GET"}))}),e?void 0:r}};t&&b(t.callback)&&(l._internals.initCallback=t.callback),window&&null==window.DigiTrust&&(window.DigiTrust=l)}var T=function(t){return!!(t&&0<t.length)||(a.logError("[DigiTrust Prebid Client Error] Missing member ID, add the member ID to the function call options"),!1)},v={hasConsent:function(t,e){var n;t=t||{consentTimeout:1500};var r=!1,i=!1;void 0!==window.__cmp?(n=setTimeout(function(){r=!(i=!1),e(i)},t.consentTimeout),window.__cmp("ping",null,function(t){if(t.gdprAppliesGlobally)window.__cmp("getVendorConsents",[64],function(t){if(!r){clearTimeout(n);var i=t.vendorConsents[64];e(i)}});else{if(r)return;clearTimeout(n),e(i=!0)}})):e(i=!0)}},s=new function(){var e=this,n=this.idObj=null;function r(){if(null==e.idObj)return null;var t=e.configParams,i={data:null,expires:t&&t.storage&&t.storage.expires||60};return e.idObj&&e.idObj.success&&e.idObj.identity?i.data=e.idObj.identity:i.err="Failure getting id",i}this.userIdCallback=function(t){n=t,null!=e.idObj&&b(t)&&t(r())},this.retries=0,this.retryId=0,this.executeIdRequest=function(i){DigiTrust.getUser({member:"prebid"},function(t){e.idObj=t;if(b(n)&&n(r()),i&&i.callback&&b(i.callback))try{i.callback(t)}catch(t){a.logError("Failure in DigiTrust executeIdRequest",t)}})}};function l(t){return null==s.configParams&&(s.configParams=t),null==window.DigiTrust||u()?u()?s.executeIdRequest(t):s.retries>=o?(c(t),s.executeIdRequest(t)):(0!=s.retryId&&clearTimeout(s.retryId),s.retryId=setTimeout(function(){l(t)},100*(1+s.retries++))):(function(t){a.logInfo("Digitrust Init");var i=window.DigiTrust;i&&!i.isClient&&null!=t?i.initialize(t.init,t.callback):null==i&&c(t)}(t),s.retryId=setTimeout(function(){l(t)},100*(1+s.retries++))),s.userIdCallback}var I={};function p(){return k._testHook=I}I.initDigitrustFacade=c,I.gdpr=v;var k={name:"digitrust",decode:function(t){try{return{digitrustid:t}}catch(t){a.logError("DigiTrust ID submodule decode error")}},getId:function(t){return{callback:l(t)}},_testInit:p};r=setTimeout(function(){0!=s.retryId||u()||l({member:"fallback",callback:f})},1550),Object(n.e)("userId",k)}},[303]);