atdpbjsChunk([208],{274:function(t,n,e){t.exports=e(275)},275:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e.d(n,"consentAPI",function(){return c}),e.d(n,"consentTimeout",function(){return r}),e.d(n,"staticConsentData",function(){return u}),n.requestBidsHook=m,n.resetConsentData=function(){d=void 0,c=void 0,o.uspDataHandler.setConsentData(null)},n.setConsentConfig=P;var s=e(0),a=e(3),o=e(7);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c,r,u,d,l="iab",p=50,f=!1,g={iab:function(a,o,i){var n=function(){var e={};return{consentDataCallback:function(t,n){n&&t.uspString&&(e.usPrivacy=t.uspString),e.usPrivacy?a(e,i):o("Unable to get USP consent string.",i)}}}(),s={};try{window.__uspapi("getUSPData",1,n.consentDataCallback)}catch(t){for(var e,c=window;!e;){try{c.frames.__uspapiLocator&&(e=c)}catch(t){}if(c===window.top)break;c=c.parent}if(!e)return o("USP CMP not found.",i);!function(t,i,e){function a(t){var n=t&&t.data&&t.data.__uspapiReturn;n&&n.callId&&void 0!==s[n.callId]&&(s[n.callId](n.returnValue,n.success),delete s[n.callId])}window.__uspapi=function(t,n,e){var a=Math.random()+"",o={__uspapiCall:{command:t,version:n,callId:a}};s[a]=e,i.postMessage(o,"*")},window.addEventListener("message",a,!1),window.__uspapi(t,1,function(t,n){window.removeEventListener("message",a,!1),e(t,n)})}("getUSPData",e,n.consentDataCallback)}},static:function(t,n,e){t(u,e)}};function m(t,n){var e={context:this,args:[n],nextFn:t,adUnits:n.adUnits||atdpbjs.adUnits,bidsBackHandler:n.bidsBackHandler,haveExited:!1,timer:null};return d?y(null,e):g[c]?(g[c].call(this,v,b,e),void(e.haveExited||(0===r?v(void 0,e):e.timer=setTimeout(function(t){b("USPAPI workflow exceeded timeout threshold.",t)}.bind(null,e),r)))):(s.logWarn("USP framework (".concat(c,") is not a supported framework. Aborting consentManagement module and resuming auction.")),e.nextFn.apply(e.context,e.args))}function v(t,n){var e;!t||!t.usPrivacy?b("USPAPI returned unexpected value during lookup process.",n,t):(clearTimeout(n.timer),(e=t)&&e.usPrivacy&&(d=e.usPrivacy,o.uspDataHandler.setConsentData(d)),y(null,n))}function b(t,n,e){clearTimeout(n.timer),y(t,n,e)}function y(t,n,e){if(!1===n.haveExited){n.haveExited=!0;var a=n.context,o=n.args,i=n.nextFn;t&&s.logWarn(t+" Resuming auction without consent data as per consentManagement config.",e),i.apply(a,o)}}function P(t){(t=t.usp)&&"object"===i(t)?(s.isStr(t.cmpApi)?c=t.cmpApi:(c=l,s.logInfo("consentManagement.usp config did not specify cmpApi. Using system default setting (".concat(l,")."))),s.isNumber(t.timeout)?r=t.timeout:(r=p,s.logInfo("consentManagement.usp config did not specify timeout. Using system default setting (".concat(p,")."))),s.logInfo("USPAPI consentManagement module has been activated..."),"static"===c&&(s.isPlainObject(t.consentData)&&s.isPlainObject(t.consentData.getUSPData)?(t.consentData.getUSPData.uspString&&(u={usPrivacy:t.consentData.getUSPData.uspString}),r=0):s.logError("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),f||atdpbjs.requestBids.before(m,50),f=!0):s.logWarn("consentManagement.usp config not defined, exiting usp consent manager")}a.b.getConfig("consentManagement",function(t){return P(t.consentManagement)})}},[274]);