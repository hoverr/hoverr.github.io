pbjsChunk([198],{266:function(n,t,e){n.exports=e(267)},267:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),e.d(t,"consentAPI",function(){return c}),e.d(t,"consentTimeout",function(){return r}),e.d(t,"staticConsentData",function(){return u}),t.requestBidsHook=m,t.resetConsentData=function(){l=void 0,c=void 0,o.uspDataHandler.setConsentData(null)},t.setConsentConfig=P;var s=e(0),a=e(3),o=e(7);function i(n){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var c,r,u,l,d="iab",p=50,f=!1,g={iab:function(a,o,i){var t=function(){var e={};return{consentDataCallback:function(n,t){t&&n.uspString&&(e.usPrivacy=n.uspString),e.usPrivacy?a(e,i):o("Unable to get USP consent string.",i)}}}(),s={};try{window.__uspapi("getUSPData",1,t.consentDataCallback)}catch(n){for(var e,c=window;!e;){try{c.frames.__uspapiLocator&&(e=c)}catch(n){}if(c===window.top)break;c=c.parent}if(!e)return o("USP CMP not found.",i);!function(n,i,e){function a(n){var t=n&&n.data&&n.data.__uspapiReturn;t&&t.callId&&void 0!==s[t.callId]&&(s[t.callId](t.returnValue,t.success),delete s[t.callId])}window.__uspapi=function(n,t,e){var a=Math.random()+"",o={__uspapiCall:{command:n,version:t,callId:a}};s[a]=e,i.postMessage(o,"*")},window.addEventListener("message",a,!1),window.__uspapi(n,1,function(n,t){window.removeEventListener("message",a,!1),e(n,t)})}("getUSPData",e,t.consentDataCallback)}},static:function(n,t,e){n(u,e)}};function m(n,t){var e={context:this,args:[t],nextFn:n,adUnits:t.adUnits||pbjs.adUnits,bidsBackHandler:t.bidsBackHandler,haveExited:!1,timer:null};return l?y(null,e):g[c]?(g[c].call(this,v,b,e),void(e.haveExited||(0===r?v(void 0,e):e.timer=setTimeout(function(n){b("USPAPI workflow exceeded timeout threshold.",n)}.bind(null,e),r)))):(s.logWarn("USP framework (".concat(c,") is not a supported framework. Aborting consentManagement module and resuming auction.")),e.nextFn.apply(e.context,e.args))}function v(n,t){var e;!n||!n.usPrivacy?b("USPAPI returned unexpected value during lookup process.",t,n):(clearTimeout(t.timer),(e=n)&&e.usPrivacy&&(l=e.usPrivacy,o.uspDataHandler.setConsentData(l)),y(null,t))}function b(n,t,e){clearTimeout(t.timer),y(n,t,e)}function y(n,t,e){if(!1===t.haveExited){t.haveExited=!0;var a=t.context,o=t.args,i=t.nextFn;n&&s.logWarn(n+" Resuming auction without consent data as per consentManagement config.",e),i.apply(a,o)}}function P(n){(n=n.usp)&&"object"===i(n)?(s.isStr(n.cmpApi)?c=n.cmpApi:(c=d,s.logInfo("consentManagement.usp config did not specify cmpApi. Using system default setting (".concat(d,")."))),s.isNumber(n.timeout)?r=n.timeout:(r=p,s.logInfo("consentManagement.usp config did not specify timeout. Using system default setting (".concat(p,")."))),s.logInfo("USPAPI consentManagement module has been activated..."),"static"===c&&(s.isPlainObject(n.consentData)&&s.isPlainObject(n.consentData.getUSPData)?(n.consentData.getUSPData.uspString&&(u={usPrivacy:n.consentData.getUSPData.uspString}),r=0):s.logError("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),f||pbjs.requestBids.before(m,50),f=!0):s.logWarn("consentManagement.usp config not defined, exiting usp consent manager")}a.b.getConfig("consentManagement",function(n){return P(n.consentManagement)})}},[266]);