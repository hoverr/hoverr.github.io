atdpbjsChunk([205],{280:function(e,r,t){e.exports=t(281)},281:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t.d(r,"spec",function(){return p});var a=t(1),s=t(2),o=t(0),c="COSMOS: ",d="mediaTypes",p={code:"cosmos",supportedMediaTypes:[s.b,s.d],_createUUID:function(){return""+(new Date).getTime()},_copyObject:function(r,t){r&&Object.keys(r).forEach(function(e){return t[e]=r[e]})},_parse:function(e){try{if(e)return JSON.parse(e)}catch(e){o.logError(c,"Exception: ",e)}return null},isBidRequestValid:function(e){return e&&e.params?o.isEmpty(e.params.publisherId)&&o.isNumber(e.params.publisherId)?!(e.hasOwnProperty(d)&&e.mediaTypes.hasOwnProperty(s.d)&&(!e.mediaTypes.video.hasOwnProperty("mimes")||!o.isArray(e.mediaTypes.video.mimes)||0===e.mediaTypes.video.mimes.length))||(o.logError(c,"mimes are mandatory for video bid request. Ad Unit: ",JSON.stringify(e)),!1):(o.logError(c,"publisherId is mandatory and must be numeric. Ad Unit: ",JSON.stringify(e)),!1):(o.logError(c,"nil/empty bid object"),!1)},buildRequests:function(e,t){return 0===e.length?[]:(t&&t.refererInfo&&(a=t.refererInfo),o.deepClone(e).map(function(e){var r=p._createRequest(e,a);if(r)return p._setGDPRParams(t,r),{method:"POST",url:"https://bid.cosmoshq.com/openrtb2/bids",data:JSON.stringify(r)}}));var a},interpretResponse:function(e,a){var r=e.body,n=[];try{if(r.seatbid){var i=r.cur?r.cur:"USD";r.seatbid.forEach(function(e){(e.bid?e.bid:[]).forEach(function(r){var t={requestId:r.impid,cpm:(parseFloat(r.price)||0).toFixed(2),width:r.w,height:r.h,creativeId:r.crid,currency:i,netRevenue:!1,ttl:300};r.dealid&&(t.dealId=r.dealid);var e=p._parse(a.data);e.imp&&0<e.imp.length&&e.imp.forEach(function(e){e.id===r.impid&&(e.banner?(t.ad=r.adm,t.mediaType=s.b):(t.width=r.hasOwnProperty("w")?r.w:e.video.w,t.height=r.hasOwnProperty("h")?r.h:e.video.h,t.vastXml=r.adm,t.mediaType=s.d))}),n.push(t)})})}}catch(e){o.logError(c,"Exception: ",e)}return n},getUserSyncs:function(e){if(e.iframeEnabled)return[{type:"iframe",url:"https://sync.cosmoshq.com/js/v1/usersync.html"}];o.logWarn(c+"Please enable iframe based user sync.")},_createRequest:function(e,r){var t={};try{t={id:p._createUUID(),imp:p._createImpressions(e),user:{},ext:{}};var a=p._createSite(e,r),n=p._createApp(e),i=p._createDevice(e);n&&(t.app=n),a&&(t.site=a),i&&(t.device=i)}catch(e){o.logError(c,"Exception: ",e),t=null}return t},_createImpressions:function(e){var r=[],t=p._creatImpression(e);return t&&r.push(t),r},_creatImpression:function(e){if(e.hasOwnProperty(d)){var r,t,a,n=e&&e.params?e.params:null,i={id:e.bidId?e.bidId:p._createUUID(),secure:"https:"===window.location.protocol?1:0,bidfloorcur:e.params.currency?e.params.currency:"USD"};for(a in n.bidFloor&&(i.bidfloor=n.bidFloor),n.tagId&&(i.tagid=n.tagId.toString()),e.mediaTypes)switch(a){case s.b:(r=p._createBanner(e))&&(i.banner=r);break;case s.d:(t=p._createVideo(e))&&(i.video=t)}return i.hasOwnProperty(s.b)||i.hasOwnProperty(s.d)?i:void 0}},_createBanner:function(e){if(o.deepAccess(e,"mediaTypes.banner")){var r={},t=e.mediaTypes.banner.sizes;if(t&&o.isArray(t)&&0<t.length){var a=[];r.w=t[0][0],r.h=t[0][1],t.forEach(function(e){a.push({w:e[0],h:e[1]})}),r.format=a}return p._copyObject(e.mediaTypes.banner,r),p._copyObject(e.params.banner,r),r}},_createVideo:function(e){if(o.deepAccess(e,"mediaTypes.video")){var r={},t=e.mediaTypes.video.playerSize;return t&&o.isArray(t)&&1<t.length&&(r.w=t[0],r.h=t[1]),p._copyObject(e.mediaTypes.video,r),p._copyObject(e.params.video,r),r}},_createSite:function(e,r){var t=e.params.site;if(t||!e.params.app){var a={};if(p._copyObject(t,a),r&&(r.referer&&(a.ref=encodeURIComponent(r.referer)),o.isArray(r.stack)&&0<r.stack.length)){a.page=encodeURIComponent(r.stack[0]);var n=document.createElement("a");n.href=a.page,a.domain=n.hostname}return a.publisher={id:e.params.publisherId.toString()},a}},_createApp:function(e){var r=e.params.app;if(r){var t={};return p._copyObject(r,t),t.publisher={id:e.params.publisherId.toString()},t}},_createDevice:function(e){var r={},t=e.params.device;return p._copyObject(t,r),r.dnt=o.getDNT()?1:0,r.ua=navigator.userAgent,r.language=navigator.language||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage,r.w=window.screen.width||window.innerWidth,r.h=window.screen.height||window.innerHeigh,r},_setGDPRParams:function(e,r){e&&e.gdprConsent&&(r.regs={ext:{gdpr:e.gdprConsent.gdprApplies?1:0}},r.user={ext:{consent:e.gdprConsent.consentString}})}};Object(a.registerBidder)(p)}},[280]);