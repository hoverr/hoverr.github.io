atdpbjsChunk([209],{267:function(n,t,e){n.exports=e(268)},268:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),e.d(t,"userCMP",function(){return l}),e.d(t,"consentTimeout",function(){return u}),e.d(t,"allowAuction",function(){return g}),e.d(t,"staticConsentData",function(){return p}),t.requestBidsHook=k,t.resetConsentData=function(){m=void 0,l=void 0,y=0,a.gdprDataHandler.setConsentData(null)},t.setConsentConfig=x;var d=e(0),o=e(3),a=e(7),i=e(11),s=e.n(i),r=e(269),f=e.n(r);function c(n){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var l,u,g,p,m,C="iab",v=1e4,b=!0,y=0,w=!1,D={iab:function(o,e,s){function n(n,t){d.logInfo("Received a response from CMP",n),t?("tcloaded"===n.eventStatus||"useractioncomplete"===n.eventStatus||"cmpuishown"===n.eventStatus&&0<n.tcString.length&&!0===n.purposeOneTreatment)&&o(n,s):e("CMP unable to register callback function.  Please check CMP setup.",s)}var t=function(){var t={};function e(){t.getConsentData&&t.getVendorConsents&&(d.logInfo("Received all requested responses from CMP",t),o(t,s))}return{consentDataCallback:function(n){t.getConsentData=n,e()},vendorConsentsCallback:function(n){t.getVendorConsents=n,e()}}}(),u={},a=function(){for(var n,t,e=window;!n;){try{if("function"==typeof e.__tcfapi||"function"==typeof e.__cmp){t="function"==typeof e.__tcfapi?(y=2,e.__tcfapi):(y=1,e.__cmp),n=e;break}}catch(n){}try{if(e.frames.__tcfapiLocator){y=2,n=e;break}}catch(n){}try{if(e.frames.__cmpLocator){y=1,n=e;break}}catch(n){}if(e===window.top)break;e=e.parent}return{cmpFrame:n,cmpFunction:t}}(),i=a.cmpFrame,r=a.cmpFunction;if(!i)return e("CMP not found.",s);d.isFn(r)?(d.logInfo("Detected CMP API is directly accessible, calling it now..."),1===y?(r("getConsentData",null,t.consentDataCallback),r("getVendorConsents",null,t.vendorConsentsCallback)):2===y&&r("addEventListener",y,n)):1===y&&window.$sf&&window.$sf.ext&&"function"==typeof window.$sf.ext.cmp?(d.logInfo("Detected Prebid.js is encased in a SafeFrame and CMP is registered, calling it now..."),c("getConsentData",t.consentDataCallback),c("getVendorConsents",t.vendorConsentsCallback)):(d.logInfo("Detected CMP is outside the current iframe where Prebid.js is located, calling it now..."),1===y?(l("getConsentData",i,t.consentDataCallback),l("getVendorConsents",i,t.vendorConsentsCallback)):2===y&&l("addEventListener",i,n));function c(o,a){var n=s.adUnits,t=1,e=1;if(Array.isArray(n)&&0<n.length){var i=d.getAdUnitSizes(n[0]);t=i[0][0],e=i[0][1]}window.$sf.ext.register(t,e,function(n,t){if("cmpReturn"===n){var e="getConsentData"===o?t.vendorConsentData:t.vendorConsents;a(e)}}),window.$sf.ext.cmp(o)}function l(n,l,t){var d=2===y?"__tcfapi":"__cmp";window[d]=function(n,t,e){var o,a,i,s=Math.random()+"",r="".concat(d,"Call"),c=(i={command:n,parameter:t,callId:s},(a=r)in(o={})?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,o);1!==y&&(c[r].version=y),u[s]=e,l.postMessage(c,"*")},window.addEventListener("message",function(n){var t="".concat(d,"Return"),e="string"==typeof n.data&&f()(n.data,t)?JSON.parse(n.data):n.data;if(e[t]&&e[t].callId){var o=e[t];void 0!==u[o.callId]&&u[o.callId](o.returnValue,o.success)}},!1),window[d](n,null,t)}},static:function(n,t,e){n(p,e)}};function k(n,t){var e={context:this,args:[t],nextFn:n,adUnits:t.adUnits||atdpbjs.adUnits,bidsBackHandler:t.bidsBackHandler,haveExited:!1,timer:null};return m?(d.logInfo("User consent information already known.  Pulling internally stored information..."),_(null,e)):s()(Object.keys(D),l)?(D[l].call(this,M,h,e),void(e.haveExited||(0===u?M(void 0,e):e.timer=setTimeout(function(n){h("CMP workflow exceeded timeout threshold.",n)}.bind(null,e),u)))):(d.logWarn("CMP framework (".concat(l,") is not a supported framework.  Aborting consentManagement module and resuming auction.")),e.nextFn.apply(e.context,e.args))}function M(e,n){"static"===l&&2===(y=e.getConsentData?1:e.getTCData?2:0)&&(e=e.getTCData);var t=1===y?function(n){var t=n&&n.getConsentData&&n.getConsentData.gdprApplies;return!("boolean"==typeof t&&(!0!==t||d.isStr(n.getConsentData.consentData)&&d.isPlainObject(n.getVendorConsents)&&1<Object.keys(n.getVendorConsents).length))}:2===y?function(){var n=e&&e.gdprApplies,t=e&&e.tcString;return!("boolean"==typeof n&&(!0!==n||d.isStr(t)))}:null;d.isFn(t)?t(e)?h("CMP returned unexpected value during lookup process.",n,e):(clearTimeout(n.timer),P(e),_(null,n)):h("Unable to derive CMP version to process data.  Consent object does not conform to TCF v1 or v2 specs.",n,e)}function h(n,t,e){clearTimeout(t.timer),g&&P(void 0),_(n,t,e)}function P(n){(m=1===y?{consentString:n?n.getConsentData.consentData:void 0,vendorData:n?n.getVendorConsents:void 0,gdprApplies:n?n.getConsentData.gdprApplies:void 0}:{consentString:n?n.tcString:void 0,vendorData:n||void 0,gdprApplies:n?n.gdprApplies:void 0}).apiVersion=y,a.gdprDataHandler.setConsentData(m)}function _(n,t,e){if(!1===t.haveExited){t.haveExited=!0;var o=t.context,a=t.args,i=t.nextFn;n?g?(d.logWarn(n+" Resuming auction without consent data as per consentManagement config.",e),i.apply(o,a)):(d.logError(n+" Canceling auction as per consentManagement config.",e),"function"==typeof t.bidsBackHandler?t.bidsBackHandler():d.logError("Error executing bidsBackHandler")):i.apply(o,a)}}function x(n){(n=n.gdpr||n.usp?n.gdpr:n)&&"object"===c(n)?(d.isStr(n.cmpApi)?l=n.cmpApi:(l=C,d.logInfo("consentManagement config did not specify cmp.  Using system default setting (".concat(C,")."))),d.isNumber(n.timeout)?u=n.timeout:(u=v,d.logInfo("consentManagement config did not specify timeout.  Using system default setting (".concat(v,")."))),"boolean"==typeof n.allowAuctionWithoutConsent?g=n.allowAuctionWithoutConsent:(g=b,d.logInfo("consentManagement config did not specify allowAuctionWithoutConsent.  Using system default setting (".concat(b,")."))),d.logInfo("consentManagement module has been activated..."),"static"===l&&(d.isPlainObject(n.consentData)?(p=n.consentData,u=0):d.logError("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),w||atdpbjs.requestBids.before(k,50),w=!0):d.logWarn("consentManagement config not defined, exiting consent manager")}o.b.getConfig("consentManagement",function(n){return x(n.consentManagement)})}},[267]);