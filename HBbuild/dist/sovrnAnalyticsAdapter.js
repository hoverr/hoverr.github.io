pbjsChunk([8],{588:function(e,t,n){e.exports=n(589)},589:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=n(7),o=n(5),a=n.n(o),s=n(4),u=n(0),c=n(3),d=n(12),l=n.n(d),f=n(11),p=n.n(f);function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var g=Object(s.b)(0),I=a.a.EVENTS,T=I.AUCTION_END,E=I.BID_REQUESTED,m=I.BID_ADJUSTMENT,O=I.BID_RESPONSE,S=I.BID_WON,N="https://pba.aws.lijit.com/analytics",A={},_=function(e){var t=e.err,n=e.topFrame,i="";if(t)try{try{i=window.top.location.href}catch(e){var r=window.location.ancestorOrigins;i=r[r.length-1]}}catch(e){i=n.document.referrer}else i=n.location.href;return i}(function(){var e=window;try{for(;e.parent.document!==e.document;){if(!e.parent.document)throw new Error;e=e.parent}}catch(e){}return{topFrame:e,err:!1}}()),w=v(Object(i.a)({url:N,analyticsType:"endpoint"}),{track:function(e){var t=e.eventType,n=e.args;try{if(t===S)return void new D(this.sovrnId,n).send();if(n&&n.auctionId&&A[n.auctionId]&&"complete"===A[n.auctionId].status)throw new Error("Event Received after Auction Close Auction Id "+n.auctionId);switch(n&&n.auctionId&&void 0===A[n.auctionId]&&(A[n.auctionId]=new B(this.sovrnId,n.auctionId)),t){case E:A[n.auctionId].bidRequested(n);break;case m:A[n.auctionId].originalBid(n);break;case O:A[n.auctionId].adjustedBid(n);break;case T:A[n.auctionId].send()}}catch(e){new q(e,this.sovrnId,{eventType:t,args:n}).send()}}});w.getAuctions=function(){return A},w.originEnableAnalytics=w.enableAnalytics,w.enableAnalytics=function(e){var t="";e&&e.options&&(e.options.sovrnId||e.options.affiliateId)?(t=e.options.sovrnId||e.options.affiliateId,w.sovrnId=t,e.options.pbaUrl&&(N=e.options.pbaUrl),w.originEnableAnalytics(e)):u.logError("Need Sovrn Id to log auction results. Please contact a Sovrn representative if you do not know your Sovrn Id.")},r.default.registerAnalyticsAdapter({adapter:w,code:"sovrn"});var D=function(){function n(e,t){y(this,n),this.body={},this.body.prebidVersion="prebid_prebid_3.13.0-pre",this.body.sovrnId=e,this.body.winningBid=JSON.parse(JSON.stringify(t)),this.body.url=_,this.body.payload="winner",delete this.body.winningBid.ad}return b(n,[{key:"send",value:function(){this.body.ts=u.timestamp(),g(N,null,JSON.stringify(this.body),{contentType:"application/json",method:"POST"})}}]),n}(),B=function(){function n(e,t){y(this,n),this.auction={},this.auction.prebidVersion="prebid_prebid_3.13.0-pre",this.auction.sovrnId=e,this.auction.auctionId=t,this.auction.payload="auction",this.auction.timeouts={buffer:c.b.getConfig("timeoutBuffer"),bidder:c.b.getConfig("bidderTimeout")},this.auction.priceGranularity=c.b.getConfig("priceGranularity"),this.auction.url=_,this.auction.requests=[],this.auction.unsynced=[],this.dropBidFields=["auctionId","ad","requestId","bidderCode"],setTimeout(function(e){delete A[e]},3e5,this.auction.auctionId)}return b(n,[{key:"bidRequested",value:function(e){var t=JSON.parse(JSON.stringify(e));delete t.doneCbCallCount,delete t.auctionId,this.auction.requests.push(t)}},{key:"findBid",value:function(t){var e=l()(this.auction.requests,function(e){return e.bidderCode===t.bidderCode});e||this.auction.unsynced.push(JSON.parse(JSON.stringify(t)));var n=l()(e.bids,function(e){return e.bidId===t.requestId});return n||(t.unmatched=!0,e.bids.push(JSON.parse(JSON.stringify(t)))),n}},{key:"originalBid",value:function(e){var t=this.findBid(e);t&&(v(t,JSON.parse(JSON.stringify(e))),this.dropBidFields.forEach(function(e){return delete t[e]}))}},{key:"adjustedBid",value:function(n){var i=this,r=this.findBid(n);r&&(r.originalValues=Object.keys(n).reduce(function(e,t){return JSON.stringify(r[t])===JSON.stringify(n[t])||p()(i.dropBidFields,t)||(e[t]=r[t],r[t]=n[t]),e},{}))}},{key:"send",value:function(){var e=this,t={};this.auction.requests.forEach(function(e){e.bids.forEach(function(e){t[e.adUnitCode]=t[e.adUnitCode]||{cpm:0},e.cpm>t[e.adUnitCode].cpm&&(t[e.adUnitCode]=e)})}),Object.keys(t).forEach(function(e){t[e].isAuctionWinner=!0}),this.auction.ts=u.timestamp(),g(N,function(){A[e.auction.auctionId]={status:"complete",auctionId:e.auction.auctionId}},JSON.stringify(this.auction),{contentType:"application/json",method:"POST"})}}]),n}(),q=function(){function i(e,t,n){y(this,i),this.error={},this.error.payload="error",this.error.message=e.message,this.error.stack=e.stack,this.error.data=n,this.error.prebidVersion="prebid_prebid_3.13.0-pre",this.error.sovrnId=t,this.error.url=_,this.error.userAgent=navigator.userAgent}return b(i,[{key:"send",value:function(){this.error.data&&this.error.data.requests&&this.error.data.requests.forEach(function(e){e.bids&&e.bids.forEach(function(e){e.ad&&delete e.ad})}),ErrorEvent.data&&this.error.data.ad&&delete this.error.data.ad,this.error.ts=u.timestamp(),g(N,null,JSON.stringify(this.error),{contentType:"application/json",method:"POST"})}}]),i}();t.default=w},6:function(e,t,n){"use strict";t.a=function(e){var r,o=e.url,t=e.analyticsType,a=e.global,i=e.handler,s=[],u=0,n=!0;t!==D&&!B||function(){if(n){for(var e=0;e<s.length;e++)s[e]();s.push=function(e){e()},n=!1}h.logMessage("event count sent to ".concat(a,": ").concat(u))}();return{track:function(e){var t=e.eventType,n=e.args;this.getAdapterType()===B&&window[a](i,t,n);this.getAdapterType()===D&&function(e){var t=e.eventType,n=e.args,i=e.callback;Object(l.a)(o,i,JSON.stringify({eventType:t,args:n}))}.apply(void 0,arguments)},enqueue:c,enableAnalytics:d,disableAnalytics:function(){h._each(r,function(e,t){y.off(t,e)}),this.enableAnalytics=this._oldEnable?this._oldEnable:d},getAdapterType:function(){return t},getGlobal:function(){return a},getHandler:function(){return i},getUrl:function(){return o}};function c(e){var t=e.eventType,n=e.args,i=this;a&&window[a]&&t&&n?this.track({eventType:t,args:n}):s.push(function(){u++,i.track({eventType:t,args:n})})}function d(t){var e,n=this,i=this;"object"!==p(t)||"object"!==p(t.options)||(void 0===t.options.sampling||Math.random()<parseFloat(t.options.sampling))?(y.getEvents().forEach(function(e){if(e){var t=e.eventType,n=e.args;t!==T&&c.call(i,{eventType:t,args:n})}}),f(e={},g,function(e){return n.enqueue({eventType:g,args:e})}),f(e,I,function(e){return n.enqueue({eventType:I,args:e})}),f(e,E,function(e){return n.enqueue({eventType:E,args:e})}),f(e,m,function(e){return n.enqueue({eventType:m,args:e})}),f(e,T,function(e){return n.enqueue({eventType:T,args:e})}),f(e,O,function(e){return n.enqueue({eventType:O,args:e})}),f(e,S,function(e){return n.enqueue({eventType:S,args:e})}),f(e,N,function(e){return n.enqueue({eventType:N,args:e})}),f(e,A,function(e){return n.enqueue({eventType:A,args:e})}),f(e,v,function(e){return n.enqueue({eventType:v,args:e})}),f(e,_,function(e){return n.enqueue({eventType:_,args:e})}),f(e,w,function(e){return n.enqueue({eventType:w,args:e})}),f(e,b,function(e){e.config="object"===p(t)&&t.options||{},n.enqueue({eventType:b,args:e})}),r=e,h._each(r,function(e,t){y.on(t,e)})):h.logMessage('Analytics adapter for "'.concat(a,'" disabled by sampling'));this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return h.logMessage('Analytics adapter for "'.concat(a,'" already enabled, unnecessary call to `enableAnalytics`.'))}}};var i=n(5),r=n.n(i),l=n(4);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=n(8),h=n(0),o=r.a.EVENTS,b=o.AUCTION_INIT,v=o.AUCTION_END,g=o.REQUEST_BIDS,I=o.BID_REQUESTED,T=o.BID_TIMEOUT,E=o.BID_RESPONSE,m=o.NO_BID,O=o.BID_WON,S=o.BID_ADJUSTMENT,N=o.BIDDER_DONE,A=o.SET_TARGETING,_=o.AD_RENDER_FAILED,w=o.ADD_AD_UNITS,D="endpoint",B="bundle"}},[588]);