pbjsChunk([20],{466:function(e,r,t){e.exports=t(467)},467:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.resetSyncedStatus=function(){v=!1},r.PrebidServer=D;var i=t(75),m=t(23),y=t(0),h=t(5),x=(t.n(h),t(7)),S=t(3),j=t(2),A=t(27),p=t(1),n=t(8),l=t.n(n),s=t(11),b=t.n(s),a=t(468),f=t(4),d=t(12),O=t.n(d);function _(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function w(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],i=!0,n=!1,s=void 0;try{for(var a,d=e[Symbol.iterator]();!(i=(a=d.next()).done)&&(t.push(a.value),!r||t.length!==r);i=!0);}catch(e){n=!0,s=e}finally{try{i||null==d.return||d.return()}finally{if(n)throw s}}return t}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return c(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}function k(){return(k=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var I,C=S.b.getConfig,T=h.S2S.SRC,v=!1,o={enabled:!1,timeout:1e3,maxBids:1,adapter:"prebidServer",adapterOptions:{},syncUrlModifier:{}};function g(e){if(0!==e.length){var r=e.pop();r.no_cookie?function(e,r,t,i){if(I.syncUrlModifier&&"function"==typeof I.syncUrlModifier[t]){var n=I.syncUrlModifier[t](e,r,t);u(e,n,t,i)}else u(e,r,t,i)}(r.usersync.type,r.usersync.url,r.bidder,y.bind.call(g,null,e)):g(e)}}function u(e,r,t,i){r?"image"===e||"redirect"===e?(y.logMessage('Invoking image pixel user sync for bidder: "'.concat(t,'"')),y.triggerPixel(r,i)):"iframe"==e?(y.logMessage('Invoking iframe user sync for bidder: "'.concat(t,'"')),y.insertUserSyncIframe(r,i)):(y.logError('User sync type "'.concat(e,'" not supported for bidder: "').concat(t,'"')),i()):(y.logError('No sync url for bidder "'.concat(t,'": ').concat(r)),i())}function U(e){var r=function(e){var r=y.deepAccess(e,"bids.0.userId.digitrustid.data");if(r)return r;var t=S.b.getConfig("digiTrustId");return t&&t.success&&t.identity||null}(0<arguments.length&&void 0!==e?e:{});return!r||r.privacy&&r.privacy.optout?null:{id:r.id,keyv:r.keyv}}S.b.setDefaults({s2sConfig:o}),C("s2sConfig",function(e){return function(r){if(r.defaultVendor){var t=r.defaultVendor,i=Object.keys(r);if(!a.a[t])return y.logError("Incorrect or unavailable prebid server default vendor option: "+t),!1;Object.keys(a.a[t]).forEach(function(e){o[e]!==r[e]&&b()(i,e)||(r[e]=a.a[t][e])})}var n=Object.keys(r);0<["accountId","bidders","endpoint"].filter(function(e){return!b()(n,e)&&(y.logError(e+" missing in server to server config"),!0)}).length||(I=r)}(e.s2sConfig)});var P={sponsoredBy:1,body:2,rating:3,likes:4,downloads:5,price:6,salePrice:7,phone:8,address:9,body2:10,cta:12},R=Object.keys(P),B={icon:1,image:3},V={img:1,js:2};[P,B,{impression:1,"viewable-mrc50":2,"viewable-mrc100":3,"viewable-video50":4},V].forEach(function(r){Object.keys(r).forEach(function(e){r[r[e]]=e})});var q={},z={},N={buildRequest:function(e,p,r){var l=[],b={};if(r.forEach(function(r){var e,d=Object(A.g)(y.deepAccess(r,"mediaTypes.native"));if(d)try{e=z[r.code]=Object.keys(d).reduce(function(e,r){var t=d[r];function i(e){return k({required:t.required?1:0},e?y.cleanObj(e):{})}switch(r){case"image":case"icon":var n=B[r],s=y.cleanObj({type:n,w:y.deepAccess(t,"sizes.0"),h:y.deepAccess(t,"sizes.1"),wmin:y.deepAccess(t,"aspect_ratios.0.min_width"),hmin:y.deepAccess(t,"aspect_ratios.0.min_height")});if(!(s.w&&s.h||s.hmin&&s.wmin))throw"invalid img sizes (must provide sizes or min_height & min_width if using aspect_ratios)";Array.isArray(t.aspect_ratios)&&(s.ext={aspectratios:t.aspect_ratios.map(function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)})}),e.push(i({img:s}));break;case"title":if(!t.len)throw"invalid title.len";e.push(i({title:{len:t.len}}));break;default:var a=P[r];a&&e.push(i({data:{type:a,len:t.len}}))}return e},[])}catch(e){y.logError("error creating native request: "+String(e))}var t=y.deepAccess(r,"mediaTypes.video"),i=y.deepAccess(r,"mediaTypes.banner");r.bids.forEach(function(e){q["".concat(r.code).concat(e.bidder)]=e.bid_id,x.default.aliasRegistry[e.bidder]&&(b[e.bidder]=x.default.aliasRegistry[e.bidder])});var n={};if(i&&i.sizes){var s=y.parseSizesInput(i.sizes).map(function(e){var r=w(e.split("x"),2),t=r[0],i=r[1];return{w:parseInt(t,10),h:parseInt(i,10)}});n.banner={format:s}}if(y.isEmpty(t)||("outstream"!==t.context||r.renderer?n.video=t:y.logError("Outstream bid without renderer cannot be sent to Prebid Server.")),e)try{n.native={request:JSON.stringify({context:1,plcmttype:1,eventtrackers:[{event:1,methods:[1]}],assets:e}),ver:"1.2"}}catch(e){y.logError("error creating native request: "+String(e))}var a=r.bids.reduce(function(e,r){var t=x.default.bidderRegistry[r.bidder];return t&&t.getSpec().transformBidParams&&(r.params=t.getSpec().transformBidParams(r.params,!0)),e[r.bidder]=I.adapterOptions&&I.adapterOptions[r.bidder]?k({},r.params,I.adapterOptions[r.bidder]):r.params,e},{}),c={id:r.code,ext:a,secure:I.secure},o=y.deepAccess(r,"fpd.context.pbAdSlot");"string"==typeof o&&o&&y.deepSetValue(c,"ext.context.data.adslot",o),k(c,n);var u=O()(p[0].bids,function(e){return e.adUnitCode===r.code&&e.storedAuctionResponse});u&&y.deepSetValue(c,"ext.prebid.storedauctionresponse.id",u.storedAuctionResponse.toString()),(c.banner||c.video||c.native)&&l.push(c)}),l.length){var t={id:e.tid,source:{tid:e.tid},tmax:I.timeout,imp:l,test:C("debug")?1:0,ext:{prebid:{targeting:{includewinners:!0,includebidderkeys:!1}}}};I.extPrebid&&"object"===E(I.extPrebid)&&(t.ext.prebid=k(t.ext.prebid,I.extPrebid));var i,n,s=S.b.getConfig("currency.adServerCurrency");s&&"string"==typeof s?t.cur=[s]:Array.isArray(s)&&s.length&&(t.cur=[s[0]]),i=t,n=p[0].refererInfo.referer,i&&("object"===E(S.b.getConfig("app"))?(i.app=S.b.getConfig("app"),i.app.publisher={id:I.accountId}):i.site={publisher:{id:I.accountId},page:n},"object"===E(S.b.getConfig("device"))&&(i.device=S.b.getConfig("device")),i.device||(i.device={}),i.device.w||(i.device.w=window.innerWidth),i.device.h||(i.device.h=window.innerHeight));var a=U(p&&p[0]);a&&y.deepSetValue(t,"user.ext.digitrust",a);var d=y.deepAccess(p,"0.bids.0.schain");d&&(t.source.ext={schain:d}),y.isEmpty(b)||(t.ext.prebid.aliases=b);var c=y.deepAccess(p,"0.bids.0.userId");if(c&&"object"===E(c)&&(c.tdid||c.pubcid||c.parrableid||c.lipb||c.id5id||c.criteoId||c.britepoolid||c.idl_env)){if(y.deepSetValue(t,"user.ext.eids",[]),c.tdid&&t.user.ext.eids.push({source:"adserver.org",uids:[{id:c.tdid,ext:{rtiPartner:"TDID"}}]}),c.pubcid&&t.user.ext.eids.push({source:"pubcid.org",uids:[{id:c.pubcid}]}),c.parrableid&&t.user.ext.eids.push({source:"parrable.com",uids:[{id:c.parrableid}]}),c.lipb&&c.lipb.lipbid){var o={source:"liveintent.com",uids:[{id:c.lipb.lipbid}]};Array.isArray(c.lipb.segments)&&c.lipb.segments.length&&(o.ext={segments:c.lipb.segments}),t.user.ext.eids.push(o)}c.id5id&&t.user.ext.eids.push({source:"id5-sync.com",uids:[{id:c.id5id}]}),c.criteoId&&t.user.ext.eids.push({source:"criteo.com",uids:[{id:c.criteoId}]}),c.britepoolid&&t.user.ext.eids.push({source:"britepool.com",uids:[{id:c.britepoolid}]}),c.idl_env&&t.user.ext.eids.push({source:"liveramp.com",uids:[{id:c.idl_env}]})}if(p){var u;if(p[0].gdprConsent)"boolean"==typeof p[0].gdprConsent.gdprApplies&&(u=p[0].gdprConsent.gdprApplies?1:0),y.deepSetValue(t,"regs.ext.gdpr",u),y.deepSetValue(t,"user.ext.consent",p[0].gdprConsent.consentString);p[0].uspConsent&&y.deepSetValue(t,"regs.ext.us_privacy",p[0].uspConsent)}!0===C("coppa")&&y.deepSetValue(t,"regs.coppa",1);var f,v,g,m=C("fpd")||{};return m.context&&y.deepSetValue(t,"site.ext.data",m.context),m.user&&y.deepSetValue(t,"user.ext.data",m.user),f=t,v=S.b.getBidderConfig(),(g=Object.keys(v).reduce(function(e,r){var t=v[r];if(t.fpd){var i={};t.fpd.context&&(i.site=t.fpd.context),t.fpd.user&&(i.user=t.fpd.user),e.push({bidders:[r],config:{fpd:i}})}return e},[])).length&&y.deepSetValue(f,"ext.prebid.bidderconfig",g),t}y.logError("Request to Prebid Server rejected due to invalid media type(s) in adUnit.")},interpretResponse:function(f,v){var g=[];return f.seatbid&&f.seatbid.forEach(function(b){(b.bid||[]).forEach(function(e){var r,t="".concat(e.impid).concat(b.seat);q[t]&&(r=y.getBidRequest(q[t],v));var i=e.price,n=0!==i?h.STATUS.GOOD:h.STATUS.NO_BID,s=Object(m.a)(n,r||{bidder:b.seat,src:T});s.cpm=i;var a=y.deepAccess(f,["ext","responsetimemillis",b.seat].join("."));r&&a&&(r.serverResponseTimeMs=a);var d=y.deepAccess(e,"ext.prebid.targeting");if(d&&"object"===E(d)&&(s.adserverTargeting=d),s.seatBidId=e.id,y.deepAccess(e,"ext.prebid.type")===j.d){s.mediaType=j.d;var c=r.sizes&&r.sizes[0];s.playerHeight=c[0],s.playerWidth=c[1],e.ext.prebid.cache&&"object"===E(e.ext.prebid.cache.vastXml)&&e.ext.prebid.cache.vastXml.cacheId&&e.ext.prebid.cache.vastXml.url?(s.videoCacheKey=e.ext.prebid.cache.vastXml.cacheId,s.vastUrl=e.ext.prebid.cache.vastXml.url):d&&d.hb_uuid&&d.hb_cache_host&&d.hb_cache_path&&(s.videoCacheKey=d.hb_uuid,s.vastUrl="https://".concat(d.hb_cache_host).concat(d.hb_cache_path,"?uuid=").concat(d.hb_uuid)),e.adm&&(s.vastXml=e.adm),!s.vastUrl&&e.nurl&&(s.vastUrl=e.nurl)}else if(y.deepAccess(e,"ext.prebid.type")===j.c){var o,u;s.mediaType=j.c,u="string"==typeof e.adm?s.adm=JSON.parse(e.adm):s.adm=e.adm;var p=(_(o={},V.img,u.imptrackers||[]),_(o,V.js,u.jstracker?[u.jstracker]:[]),o);if(u.eventtrackers&&u.eventtrackers.forEach(function(e){switch(e.method){case V.img:p[V.img].push(e.url);break;case V.js:p[V.js].push(e.url)}}),y.isPlainObject(u)&&Array.isArray(u.assets)){var l=z[r.adUnitCode];s.native=y.cleanObj(u.assets.reduce(function(r,t){var i=l[t.id];return y.isPlainObject(t.img)?r[i.img.type?B[i.img.type]:"image"]=y.pick(t.img,["url","w as width","h as height"]):y.isPlainObject(t.title)?r.title=t.title.text:y.isPlainObject(t.data)&&R.forEach(function(e){P[e]===i.data.type&&(r[e]=t.data.value)}),r},y.cleanObj({clickUrl:u.link,clickTrackers:y.deepAccess(u,"link.clicktrackers"),impressionTrackers:p[V.img],javascriptTrackers:p[V.js]})))}else y.logError("prebid server native response contained no assets")}else e.adm&&e.nurl?(s.ad=e.adm,s.ad+=y.createTrackPixelHtml(decodeURIComponent(e.nurl))):e.adm?s.ad=e.adm:e.nurl&&(s.adUrl=e.nurl);s.width=e.w,s.height=e.h,e.dealid&&(s.dealId=e.dealid),s.requestId=r.bidId||r.bid_Id,s.creative_id=e.crid,s.creativeId=e.crid,e.burl&&(s.burl=e.burl),s.currency=f.cur?f.cur:"USD",s.ttl=e.ttl?e.ttl:60,s.netRevenue=!e.netRevenue||e.netRevenue,g.push({adUnit:e.impid,bid:s})})}),g}};function D(){var e=new i.a("prebidServer");return e.callBids=function(e,r,t,i,n){var s,a,d=y.deepClone(e.ad_units).filter(function(e){return e.mediaTypes&&(e.mediaTypes.native||e.mediaTypes.banner&&e.mediaTypes.banner.sizes||e.mediaTypes.video&&e.mediaTypes.video.playerSize)}),c=d.map(function(e){return e.bids.map(function(e){return e.bidder}).filter(y.uniques)}).reduce(y.flatten).filter(y.uniques);I&&I.syncEndpoint&&(Array.isArray(r)&&0<r.length&&(s=r[0].gdprConsent,a=r[0].uspConsent),function(e,r,t){if(!v){v=!0;var i={uuid:y.generateUUID(),bidders:e,account:I.accountId},n=I.userSyncLimit;y.isNumber(n)&&0<n&&(i.limit=n),r&&(void 0!==r.consentString&&(i.gdpr=r.gdprApplies?1:0),!1!==r.gdprApplies&&(i.gdpr_consent=r.consentString)),t&&(i.us_privacy=t);var s=JSON.stringify(i);Object(f.a)(I.syncEndpoint,function(e){try{g((e=JSON.parse(e)).bidder_status)}catch(e){y.logError(e)}},s,{contentType:"text/plain",withCredentials:!0})}}(I.bidders.map(function(e){return x.default.aliasRegistry[e]||e}).filter(function(e,r,t){return t.indexOf(e)===r}),s,a));var o=N.buildRequest(e,r,d),u=o&&JSON.stringify(o);o&&u&&n(I.endpoint,{success:function(e){return function(e,r,i,n,t){var s;try{s=JSON.parse(e),N.interpretResponse(s,i,r).forEach(function(e){var r=e.adUnit,t=e.bid;Object(p.isValid)(r,t,i)&&n(r,t)}),i.forEach(function(e){return l.a.emit(h.EVENTS.BIDDER_DONE,e)})}catch(e){y.logError(e)}(!s||s.status&&b()(s.status,"Error"))&&y.logError("error parsing response: ",s.status);t(),function(e){e.forEach(function(e){var r=x.default.getBidAdapter(e);r&&r.registerSyncs&&r.registerSyncs([])})}(r)}(e,c,r,t,i)},error:i},u,{contentType:"text/plain",withCredentials:!0})},k(this,{callBids:e.callBids,setBidderCode:e.setBidderCode,type:T})}x.default.registerBidAdapter(new D,"prebidServer")},468:function(e,r,t){"use strict";t.d(r,"a",function(){return i});var i={appnexus:{adapter:"prebidServer",enabled:!0,endpoint:"https://prebid.adnxs.com/pbs/v1/openrtb2/auction",syncEndpoint:"https://prebid.adnxs.com/pbs/v1/cookie_sync",timeout:1e3},rubicon:{adapter:"prebidServer",enabled:!0,endpoint:"https://prebid-server.rubiconproject.com/openrtb2/auction",syncEndpoint:"https://prebid-server.rubiconproject.com/cookie_sync",timeout:500}}}},[466]);