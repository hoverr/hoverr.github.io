atdpbjsChunk([131],{457:function(e,r,d){e.exports=d(458)},458:function(e,r,d){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),d.d(r,"spec",function(){return a});var i=d(10),n=d(4),s=d(0),t=d(1),o=d(2);function p(){return(p=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var d=arguments[r];for(var n in d)Object.prototype.hasOwnProperty.call(d,n)&&(e[n]=d[n])}return e}).apply(this,arguments)}var u=1,l=2,a={code:"open8",supportedMediaTypes:[o.d,o.b],isBidRequestValid:function(e){return!!e.params.slotKey},buildRequests:function(e){for(var r=[],d=0;d<e.length;d++){var n=e[d],t="",a=s.getBidIdParameter("slotKey",n.params);t=s.tryAppendQueryString(t,"slot_key",a),t=s.tryAppendQueryString(t,"imp_id",c()),t+="bid_id="+n.bidId,r.push({method:"GET",url:"https://as.vt.open8.com/v1/control/prebid",data:t})}return r},interpretResponse:function(e){var r=e.body;if(!r.isAdReturn)return[];var d=r.ad,n={slotKey:r.slotKey,userId:r.userId,impId:r.impId,media:r.media,ds:d.ds,spd:d.spd,fa:d.fa,pr:d.pr,mr:d.mr,nurl:d.nurl,requestId:d.bidId,cpm:d.price,creativeId:d.creativeId,dealId:d.dealId,currency:d.currency||"JPY",netRevenue:!0,ttl:360};if(d.adType===u){var t=r.ad.video;p(n,{vastXml:t.vastXml,width:t.w,height:t.h,renderer:function(e){var r=i.a.install({id:e.ad.bidId,url:e.ad.video.purl,loaded:!1});try{r.setRender(f)}catch(e){s.logWarn("Prebid Error calling setRender on newRenderer",e)}return r}(r),adResponse:r,mediaType:o.d})}else if(d.adType===l){var a=r.ad.banner;if(p(n,{width:a.w,height:a.h,ad:a.adm,mediaType:o.b}),a.imps)try{a.imps.forEach(function(e){var r=s.createTrackPixelHtml(e);n.ad+=r})}catch(e){s.logError("Error appending imp tracking pixel",e)}}return[n]},getUserSyncs:function(e,r){var d=[];if(e.iframeEnabled&&r.length){var n=r[0].body.syncIFs;n&&n.forEach(function(e){d.push({type:"iframe",url:e})})}if(e.pixelEnabled&&r.length){var t=r[0].body.syncPixels;t&&t.forEach(function(e){d.push({type:"image",url:e})})}return d},onBidWon:function(e){if(e.nurl){var r=e.nurl.replace(/\$\{AUCTION_PRICE\}/,e.cpm);Object(n.a)(r,null)}}};function c(){for(var e="abcdefghijklmnopqrstuvwsyz0123456789",r=e.length,d="",n=0;n<16;n++)d+=e[Math.floor(Math.random()*r)];return d}function f(e){e.renderer.push(function(){window.op8.renderPrebid({vastXml:e.vastXml,adUnitCode:e.adUnitCode,slotKey:e.slotKey,impId:e.impId,userId:e.userId,media:e.media,ds:e.ds,spd:e.spd,fa:e.fa,pr:e.pr,mr:e.mr,adResponse:e.adResponse,mediaType:e.mediaType})})}Object(t.registerBidder)(a)}},[457]);