atdpbjsChunk([10],{580:function(e,t,n){e.exports=n(581)},581:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=n(5),a=n.n(o),r=n(7),s=n(4);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n(0),l=Object(s.b)(0),f="apex.go.sonobi.com/keymaker",b=a.a.EVENTS,T=b.AUCTION_INIT,I=b.AUCTION_END,h=b.BID_REQUESTED,m=b.BID_ADJUSTMENT,E=b.BIDDER_DONE,O=b.BID_WON,D=b.BID_RESPONSE,A=b.BID_TIMEOUT,y={},_={},g=36e5;function v(e){return e.responseTimestamp?e.responseTimestamp-e.requestTimestamp:-1}function q(e,t,n){var i,o,a=2<arguments.length&&void 0!==n?n:1,r=e.width?{width:e.width,height:e.height}:{width:e.sizes[0][0],height:e.sizes[0][1]};return{bidid:e.bidId||e.requestId,p:a,buyerid:e.bidder.toLowerCase(),bid:(o=e).cpm?Math.round(100*o.cpm):0,adunit_code:(i=e,"/".concat(y.pubId,"/").concat(y.siteId,"/").concat(i.adUnitCode.toLowerCase())),s:"".concat(r.width,"x").concat(r.height),latency:v(e),response:t,jsLatency:v(e),buyername:e.bidder.toLowerCase()}}function j(n,t){var i=_[n];i.queue=i.queue.filter(function(e){return e.bidid!==t||i.stats[t].data.p!==e.p}),i.queue.push(p.deepClone(i.stats[t].data)),i.qTimeout||(i.qTimeout=setTimeout(function(){var e,t;e=_[n],t=e.queue,e.queue=[],e.qTimeout=!1,N.sendData(e,t)},y.delay))}function w(e,t,n){var i=_[e];return i.stats[t].data=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach(function(e){d(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},i.stats[t].data,{},n),j(e,t),U("Updated Bid Stats: ",i.stats[t]),i.stats[t]}function S(e){var t;_[e.auctionId]={id:(t=e).auctionId,start:t.timestamp,timeout:t.timeout,adUnits:{},stats:{},queue:[],qTimeout:!1},function(){for(var e in _){var t=_[e];Date.now()-t.start>g&&delete _[e]}}(),U("Auction Init",e)}var N=u(Object(i.a)({url:f,analyticsType:"endpoint"}),{track:function(e){var t,n,i,o,a,r,s,u,c,d,p,l,f,b,y,g=e.eventType,v=e.args;switch(g){case T:S(v);break;case h:y=_[(b=v).auctionId],b.bids.forEach(function(e){y=_[e.auctionId];var t=q(e,1,1);y.stats[t.bidid]={id:t.bidid,adUnitCode:e.adUnitCode,data:t},j(b.auctionId,t.bidid)}),U("Bids Requested ",[]);break;case m:U("Bid Adjustment",v);break;case E:U("Bidder Done",v);break;case I:f={},(l=v).bidsReceived.forEach(function(e){(!f[e.adUnitCode]||f[e.adUnitCode].cpm<e.cpm)&&(f[e.adUnitCode]={bidId:e.requestId,cpm:e.cpm})}),l.adUnitCodes.forEach(function(e){if(f[e]){var t=f[e].bidId;w(l.auctionId,t,{response:4})}}),U("Auction End",l),U("Auction Cache",_[l.auctionId].stats);break;case O:p=w((d=v).auctionId,d.requestId,{p:3,response:6}),U("Bid Won ",d),U("Bid Update Result: ",p);break;case D:a=(o=v).auctionId,r=o.requestId,s=o.cpm,u=o.size,c=o.timeToRespond,w(a,r,{bid:s,s:u,jsLatency:c,latency:c,p:2,response:9}),U("Bid Response ",o);break;case A:n=(t=v).auctionId,i=t.bidId,U("Bid Timeout ",t),w(n,i,{p:2,response:0,latency:t.timeout,jsLatency:t.timeout});break;default:U("Other Event: "+g,v)}}});function U(e,t){p.logInfo(C(e),t)}function B(e){p.logError(C(e))}function C(e){return"Sonobi Prebid Analytics: "+e}N.originEnableAnalytics=N.enableAnalytics,N.enableAnalytics=function(e){this.initConfig(e)&&(U("Analytics adapter enabled",y),N.originEnableAnalytics(e))},N.initConfig=function(e){var t=!0;return(y={}).options=p.deepClone(e.options),y.pubId=y.options.pubId||null,y.siteId=y.options.siteId||null,y.delay=y.options.delay||200,y.pubId||(B('"options.pubId" is empty'),t=!1),y.siteId||(B('"options.siteId" is empty'),t=!1),y.server=f,y.host=y.options.host||window.location.hostname,this.initOptions=y,t},N.getOptions=function(){return y},N.sendData=function(e,t){var n="https://"+y.server+"?pageviewid="+e.id+"&corscred=1&pubId="+y.pubId+"&siteId="+y.siteId;l(n,function(){U("Auction ["+e.id+"] sent ",t)},JSON.stringify(t),{method:"POST",contentType:"text/plain"})},r.default.registerAnalyticsAdapter({adapter:N,code:"sonobi"}),t.default=N},6:function(e,t,n){"use strict";t.a=function(e){var o,a=e.url,t=e.analyticsType,r=e.global,i=e.handler,s=[],u=0,n=!0;t!==w&&!S||function(){if(n){for(var e=0;e<s.length;e++)s[e]();s.push=function(e){e()},n=!1}y.logMessage("event count sent to ".concat(r,": ").concat(u))}();return{track:function(e){var t=e.eventType,n=e.args;this.getAdapterType()===S&&window[r](i,t,n);this.getAdapterType()===w&&function(e){var t=e.eventType,n=e.args,i=e.callback;Object(p.a)(a,i,JSON.stringify({eventType:t,args:n}))}.apply(void 0,arguments)},enqueue:c,enableAnalytics:d,disableAnalytics:function(){y._each(o,function(e,t){b.off(t,e)}),this.enableAnalytics=this._oldEnable?this._oldEnable:d},getAdapterType:function(){return t},getGlobal:function(){return r},getHandler:function(){return i},getUrl:function(){return a}};function c(e){var t=e.eventType,n=e.args,i=this;r&&window[r]&&t&&n?this.track({eventType:t,args:n}):s.push(function(){u++,i.track({eventType:t,args:n})})}function d(t){var e,n=this,i=this;"object"!==f(t)||"object"!==f(t.options)||(void 0===t.options.sampling||Math.random()<parseFloat(t.options.sampling))?(b.getEvents().forEach(function(e){if(e){var t=e.eventType,n=e.args;t!==h&&c.call(i,{eventType:t,args:n})}}),l(e={},T,function(e){return n.enqueue({eventType:T,args:e})}),l(e,I,function(e){return n.enqueue({eventType:I,args:e})}),l(e,m,function(e){return n.enqueue({eventType:m,args:e})}),l(e,E,function(e){return n.enqueue({eventType:E,args:e})}),l(e,h,function(e){return n.enqueue({eventType:h,args:e})}),l(e,O,function(e){return n.enqueue({eventType:O,args:e})}),l(e,D,function(e){return n.enqueue({eventType:D,args:e})}),l(e,A,function(e){return n.enqueue({eventType:A,args:e})}),l(e,_,function(e){return n.enqueue({eventType:_,args:e})}),l(e,v,function(e){return n.enqueue({eventType:v,args:e})}),l(e,q,function(e){return n.enqueue({eventType:q,args:e})}),l(e,j,function(e){return n.enqueue({eventType:j,args:e})}),l(e,g,function(e){e.config="object"===f(t)&&t.options||{},n.enqueue({eventType:g,args:e})}),o=e,y._each(o,function(e,t){b.on(t,e)})):y.logMessage('Analytics adapter for "'.concat(r,'" disabled by sampling'));this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return y.logMessage('Analytics adapter for "'.concat(r,'" already enabled, unnecessary call to `enableAnalytics`.'))}}};var i=n(5),o=n.n(i),p=n(4);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=n(8),y=n(0),a=o.a.EVENTS,g=a.AUCTION_INIT,v=a.AUCTION_END,T=a.REQUEST_BIDS,I=a.BID_REQUESTED,h=a.BID_TIMEOUT,m=a.BID_RESPONSE,E=a.NO_BID,O=a.BID_WON,D=a.BID_ADJUSTMENT,A=a.BIDDER_DONE,_=a.SET_TARGETING,q=a.AD_RENDER_FAILED,j=a.ADD_AD_UNITS,w="endpoint",S="bundle"}},[580]);